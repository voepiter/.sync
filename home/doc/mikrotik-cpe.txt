#!/bin/bash

#обновление
system package update install
system routerboard upgrade

#отключить запись на flash
/system logging action set memory memory-lines=100
/system logging set [find action=disk] action=memory

/ip dhcp-server config set store-leases-disk=never

/tool/graphing/set store-every=24hours
/tool/graphing/interface/set [find store-on-disk=yes] store-on-disk=no

#Отключить Discovery Protocol (MNDP) на интерфейсе wlan1
#проверяем что discover-interface-list: LAN
ip neighbor discovery-settings print

#отключить передачу hostname dhcp server
ip dhcp-client set wlan1 use-peer-ntp=no


#добавляем скрипт смены случайного mac
/system script add name=rndmac
/system script edit rndmac source

#2я цифра mac должна быть четная [048С]

:local mac "$[:rndstr 1 from="0123456789ABCDEF"]$[:rndstr 1 from="048C"]$[:rndstr 10 from="0123456789ABCDEF"]"
/interface wireless wlan1 mac-address=$mac

#добавляем запуск скрипта при загрузке роутера
/system scheduler add name=rndmac-startup on-event=rndmac start-time=startup

#тест скорости
/tool bandwidth-test address=10.228.1.1 protocol=udp duration=10s